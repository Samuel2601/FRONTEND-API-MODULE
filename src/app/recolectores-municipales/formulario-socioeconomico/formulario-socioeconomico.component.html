<p-toast></p-toast>
<form action="" [formGroup]="registrationForm" (ngSubmit)="sendRegistro()">
    <p-panel
        header="Información de Registro"
        formGroupName="informacionRegistro"
    >
        <div class="col-6">
            <div class="p-field">
                <label for="date">Fecha</label>
                <input
                    id="date"
                    pInputText
                    type="date"
                    formControlName="date"
                />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="encuestador">Encuestador</label>
                <input
                    id="encuestador"
                    pInputText
                    formControlName="encuestador"
                />
            </div>
        </div>
    </p-panel>

    <p-panel header="Información Personal" formGroupName="informacionPersonal">
        <div class="col-6">
            <div class="p-field">
                <label for="entrevistado">Entrevistado</label>
                <input
                    id="entrevistado"
                    pInputText
                    formControlName="entrevistado"
                    class="p-inputtext-sm p-d-block"
                />
            </div>
        </div>

        <div class="col-6">
            <div class="p-field">
                <label for="dni">Nº Cédula</label>
                <input
                    id="dni"
                    pInputText
                    formControlName="dni"
                    class="p-inputtext-sm p-d-block"
                />
            </div>
        </div>

        <div class="col-6">
            <div class="p-field">
                <label for="edad">Edad</label>
                <input
                    id="edad"
                    pInputText
                    type="number"
                    formControlName="edad"
                    class="p-inputtext-sm p-d-block"
                />
            </div>
        </div>

        <div class="col-6">
            <div class="p-field">
                <label for="nacionalidad">Nacionalidad</label>
                <p-dropdown
                    [options]="nacionalidadOptions"
                    formControlName="nacionalidad"
                    placeholder="Seleccione la nacionalidad"
                    optionLabel="label"
                ></p-dropdown>
            </div>
        </div>

        <div class="col-6">
            <div class="p-field">
                <label for="phone">Teléfono</label>
                <input
                    id="phone"
                    pInputText
                    formControlName="phone"
                    class="p-inputtext-sm p-d-block"
                />
            </div>
        </div>
    </p-panel>

    <p-panel
        header="Información de Ubicación"
        formGroupName="informacionUbicacion"
    >
        <div class="col-6">
            <div class="p-field">
                <label for="posesionTime">Tiempo de Posesión</label>
                <input
                    id="posesionTime"
                    pInputText
                    formControlName="posesionTime"
                />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="sector">Sector</label>
                <input id="sector" pInputText formControlName="sector" />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="barrio">Barrio</label>
                <input id="barrio" pInputText formControlName="barrio" />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="manzana">Manzana</label>
                <input id="manzana" pInputText formControlName="manzana" />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="lotenumero">Lote Número</label>
                <input
                    id="lotenumero"
                    pInputText
                    formControlName="lotenumero"
                />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="familyCount"
                    >¿Cuántas familias viven en el hogar?
                </label>
                <input
                    id="familyCount"
                    pInputText
                    type="number"
                    formControlName="familyCount"
                />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="peopleCount"
                    >¿Cuántas personas viven en el hogar?</label
                >
                <input
                    id="peopleCount"
                    pInputText
                    type="number"
                    formControlName="peopleCount"
                />
            </div>
        </div>
        <div class="col-6">
            <div class="p-field">
                <label for="houseState">Estado actual de la Vivienda</label>
                <p-dropdown
                    [options]="houseStateOptions"
                    formControlName="houseState"
                    placeholder="Seleccione el estado"
                ></p-dropdown>
            </div>
        </div>
    </p-panel>

    <p-panel header="Información de Salud" formGroupName="salud">
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="estadoSalud"
                    >¿Cómo usted evalúa su estado de salud?</label
                >
                <p-dropdown
                    [options]="estadoSaludOptions"
                    formControlName="estadoSalud"
                    placeholder="Seleccione el estado"
                ></p-dropdown>
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="causasSalud"
                    >En su opinión, ¿cuáles son las causas de su problema de
                    salud?
                </label>
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="causasSaludOptions"
                    formControlName="causasSalud"
                    placeholder="Seleccione las causas"
                ></p-multiSelect>
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="conexionHigienico"
                    >El servicio higiénico que tiene en su vivienda está
                    conectado a:
                </label>
                <p-dropdown
                    [options]="conexionHigienicoOptions"
                    formControlName="conexionHigienico"
                    placeholder="Seleccione la conexión"
                ></p-dropdown>
            </div>
        </div>
    </p-panel>

    <p-panel header="Información de Vivienda" formGroupName="vivienda">
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="estructuraVivienda"
                    >Estructura de la Vivienda</label
                >
                <p-dropdown
                    [options]="estructuraViviendaOptions"
                    formControlName="estructuraVivienda"
                    placeholder="Seleccione la estructura"
                ></p-dropdown>
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="serviciosBasicos"
                    >¿Cuáles de los siguientes servicios básicos Ud. Dispone?
                </label>
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="serviciosBasicosOptions"
                    formControlName="serviciosBasicos"
                    placeholder="Seleccione los servicios"
                ></p-multiSelect>
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="tenenciaVivienda"
                    >La tenencia de la vivienda es</label
                >
                <p-dropdown
                    [options]="tenenciaViviendaOptions"
                    formControlName="tenenciaVivienda"
                    placeholder="Seleccione la tenencia"
                ></p-dropdown>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="documentosPropiedad"
                    >Qué documentos relativos a la propiedad usted tiene:
                </label>
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="documentosPropiedadOptions"
                    formControlName="documentosPropiedad"
                    placeholder="Seleccione los documentos"
                ></p-multiSelect>
            </div>
        </div>

        <div class="col-6">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="numPisos">¿Cuántos pisos posee la vivienda? </label>
                <input
                    type="number"
                    pInputText
                    formControlName="numPisos"
                    placeholder="Ingrese el número de pisos"
                />
            </div>
        </div>
        <div class="col-6">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="numHabitaciones"
                    >¿Cuántas habitaciones posee la vivienda?
                </label>
                <input
                    type="number"
                    pInputText
                    formControlName="numHabitaciones"
                    placeholder="Ingrese el número de habitaciones"
                />
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="tipoAlumbrado"
                    >Tipo de alumbrado de la Vivienda</label
                >
                <p-dropdown
                    [options]="tipoAlumbradoOptions"
                    formControlName="tipoAlumbrado"
                    placeholder="Seleccione el tipo de alumbrado"
                ></p-dropdown>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="abastecimientoAgua"
                    >¿Cómo se abastece con el agua?
                </label>
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="abastecimientoAguaOptions"
                    formControlName="abastecimientoAgua"
                    placeholder="Seleccione el abastecimiento de agua"
                ></p-multiSelect>
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="bienesServiciosElectrodomesticos"
                    >¿Cuáles de los siguientes servicios electrodomésticos Ud.
                    Dispone?
                </label>
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="bienesServiciosElectrodomesticosOptions"
                    formControlName="bienesServiciosElectrodomesticos"
                    placeholder="Seleccione los servicios"
                ></p-multiSelect>
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="zonaRiesgo"
                    >¿Su vivienda se encuentra en una zona de riesgo?</label
                >
                <p-dropdown
                    [options]="zonaRiesgoOptions"
                    formControlName="zonaRiesgo"
                    placeholder="Seleccione la zona de riesgo"
                ></p-dropdown>
            </div>
        </div>
    </p-panel>

    <p-panel header="Medios de Vida" formGroupName="mediosDeVida">
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="participacionCapacitacion"
                    >Ha participado en algún tipo de capacitación</label
                >
                <p-dropdown
                    [options]="participacionCapacitacionOptions"
                    formControlName="participacionCapacitacion"
                    placeholder="Seleccione una opción"
                ></p-dropdown>
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="cuantosTrabajos"
                    >¿Cuántos trabajos desempeña?
                </label>
                <input
                    type="number"
                    pInputText
                    formControlName="cuantosTrabajos"
                    placeholder="Ingrese el número de trabajos"
                />
            </div>
        </div>
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="actividadLaboral"
                    >En los últimos 12 meses, ha tenido una actividad laboral:
                </label>
                <p-dropdown
                    [options]="actividadLaboralOptions"
                    formControlName="actividadLaboral"
                    placeholder="Seleccione una opción"
                ></p-dropdown>
            </div>
        </div>

        <!-- Tabla de Actividades Económicas -->
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label>Qué actividades económica a desempeñado?</label>
                <button
                    pButton
                    type="button"
                    icon="pi pi-plus"
                    label="Añadir Actividad"
                    (click)="showDialogActividadEconomica()"
                ></button>
                <p-table
                    [style.width]="'100%'"
                    [value]="actividadEconomicaList"
                    [paginator]="true"
                    [rows]="5"
                    [responsiveLayout]="'scroll'"
                >
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Nombre de la Actividad</th>
                            <th>Acciones</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-actividad>
                        <tr>
                            <td>{{ actividad.nombre }}</td>
                            <td>
                                <button
                                    pButton
                                    icon="pi pi-pencil"
                                    class="p-button-rounded p-button-warning"
                                    (click)="editActividadEconomica(actividad)"
                                ></button>
                                <button
                                    pButton
                                    icon="pi pi-trash"
                                    class="p-button-rounded p-button-danger"
                                    (click)="
                                        deleteActividadEconomica(actividad)
                                    "
                                ></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="relacionDependencia"
                    >Trabaja en relación de dependencia?</label
                >
                <p-dropdown
                    [options]="relacionDependenciaOptions"
                    formControlName="relacionDependencia"
                    placeholder="Seleccione una opción"
                ></p-dropdown>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="cuentaPropia">Trabaja por cuenta propia?</label>
                <p-dropdown
                    [options]="cuentaPropiaOptions"
                    formControlName="cuentaPropia"
                    placeholder="Seleccione una opción"
                ></p-dropdown>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="ingresosMensuales"
                    >Ingresos mensuales promedios del hogar (sumando los
                    ingresos de todos los individuos activos)</label
                >
                <p-dropdown
                    [options]="ingresosMensualesOptions"
                    formControlName="ingresosMensuales"
                    placeholder="Seleccione una opción"
                ></p-dropdown>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="gastosHogar"
                    >Repartición de los gastos del hogar:
                </label>
                <button
                    pButton
                    type="button"
                    icon="pi pi-plus"
                    label="Añadir Gasto"
                    (click)="showDialogGastosHogar()"
                ></button>
                <p-table
                    [style.width]="'100%'"
                    [value]="gastosHogarList"
                    [paginator]="true"
                    [rows]="5"
                    [responsiveLayout]="'scroll'"
                >
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Tipo de Gasto</th>
                            <th>Porcentaje</th>
                            <th>Acciones</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-gasto>
                        <tr>
                            <td>{{ gasto.tipo.label }}</td>
                            <td>{{ gasto.porcentaje }}%</td>
                            <td>
                                <button
                                    pButton
                                    icon="pi pi-pencil"
                                    class="p-button-rounded p-button-warning"
                                    (click)="editGastoHogar(gasto)"
                                ></button>
                                <button
                                    pButton
                                    icon="pi pi-trash"
                                    class="p-button-rounded p-button-danger"
                                    (click)="deleteGastoHogar(gasto)"
                                ></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="fuentesIngresos"
                    >Los ingresos mensuales provienen de:
                </label>
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="fuentesIngresosOptions"
                    formControlName="fuentesIngresos"
                    placeholder="Seleccione las fuentes de ingresos"
                ></p-multiSelect>
            </div>
        </div>
    </p-panel>

    <p-panel
        header="Redes de Apoyo"
        styleClass="mb-3"
        formGroupName="redesDeApoyo"
    >
        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="actividadesBarrio"
                    >Participa en actividades en el barrio</label
                >
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="actividadesBarrioOptions"
                    formControlName="actividadesBarrio"
                    defaultLabel="Seleccione..."
                >
                </p-multiSelect>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="recibeayudaHumanitaria"
                    >Recibe algún tipo de ayuda humanitaria?</label
                >
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="recibeAyudaHumanitariaOptions"
                    formControlName="recibeayudaHumanitaria"
                    defaultLabel="Seleccione..."
                >
                </p-multiSelect>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="actividadCantonDentro"
                    >En su tiempo libre, que actividades realizan (dentro del
                    cantón)</label
                >
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="actividadCantonDentroOptions"
                    formControlName="actividadCantonDentro"
                    defaultLabel="Seleccione..."
                >
                </p-multiSelect>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="actividadCantonFuera"
                    >En su tiempo libre, que actividades realizan (fuera del
                    cantón)</label
                >
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    [options]="actividadCantonFueraOptions"
                    formControlName="actividadCantonFuera"
                    defaultLabel="Seleccione..."
                >
                </p-multiSelect>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="mejorasBarrio"
                    >¿Qué sugiere usted para mejorar su barrio? (Seleccionar 3)
                </label>
                <p-multiSelect
                    [filter]="false"
                    selectedItemsLabel="{0} seleccionado"
                    [maxSelectedLabels]="1"
                    selectionLimit="3"
                    [options]="mejorasBarrioOptions"
                    formControlName="mejorasBarrio"
                    defaultLabel="Seleccione..."
                >
                </p-multiSelect>
            </div>
        </div>

        <div class="col-12">
            <div
                class="p-field"
                style="
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;
                    align-content: center;
                "
            >
                <label for="mejoraPlus"
                    >Propuestas adicionales para la mejora del barrio</label
                >
                <input type="text" pInputText formControlName="mejoraPlus" />
            </div>
        </div>
    </p-panel>
    <div
        style="
            margin-bottom: 1rem;
            margin-right: 1rem;
            display: flex;
            justify-content: flex-end;
            margin-top: 1rem;
        "
    >
        <button pButton type="submit" label="Registrar"></button>
    </div>

    <div>
        <button
            pButton
            type="button"
            label="Agregar Familiar"
            (click)="showDialogFamiliar()"
        ></button>
        <p-table
            [style.width]="'100%'"
            [value]="familiarList"
            [paginator]="true"
            [rows]="5"
            [responsiveLayout]="'scroll'"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th>Parentesco</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Genero</th>
                    <th>Edad</th>
                    <th>Estado Civil</th>
                    <th>Etnia</th>
                    <th>Nacionalidad</th>
                    <th>Cedula</th>
                    <th>Nivel Educativo</th>
                    <th>Ocupación</th>
                    <th>Discapacidad</th>
                    <th>Enfermedad</th>
                    <th>Acciones</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-familiar>
                <tr>
                    <td>{{ familiar.familiParentesco }}</td>
                    <td>{{ familiar.familiaNombre }}</td>
                    <td>{{ familiar.familiaApellido }}</td>
                    <td>{{ familiar.familigenero }}</td>
                    <td>{{ familiar.familiEdad }}</td>
                    <td>{{ familiar.familiEstadoCivil }}</td>
                    <td>{{ familiar.familiEtnia }}</td>
                    <td>{{ familiar.familiNacionalidad }}</td>
                    <td>{{ familiar.familiCeduala }}</td>
                    <td>{{ familiar.familiNivelEducativo }}</td>
                    <td>{{ familiar.familiOcupacion }}</td>
                    <td>{{ familiar.familiDiscacidad }}</td>
                    <td>{{ familiar.familiEnfermedad }}</td>
                    <td>
                        <button
                            pButton
                            icon="pi pi-pencil"
                            class="p-button-rounded p-button-warning"
                            (click)="editFamiliar(familiar)"
                        ></button>
                        <button
                            pButton
                            icon="pi pi-trash"
                            class="p-button-rounded p-button-danger"
                            (click)="deleteFamiliar(familiar)"
                        ></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</form>

<!-- Diálogo para agregar o editar Actividad Económica -->
<p-dialog
    header="Actividad Económica"
    [(visible)]="displayActividadDialog"
    [modal]="true"
    [responsive]="true"
    [style]="{ width: '400px' }"
    [closable]="false"
>
    <div class="p-fluid">
        <div class="p-field">
            <label for="nombreActividad">Nombre de la Actividad</label>
            <input
                type="text"
                pInputText
                [(ngModel)]="actividadActual.nombre"
                placeholder="Ingrese la actividad económica"
            />
        </div>
    </div>
    <p-footer>
        <button
            pButton
            label="Guardar"
            icon="pi pi-check"
            (click)="saveActividadEconomica()"
        ></button>
        <button
            pButton
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-secondary"
            (click)="cancelActividadEconomica()"
        ></button>
    </p-footer>
</p-dialog>

<!-- Diálogo para agregar o editar Gastos del Hogar -->
<p-dialog
    header="Gastos del Hogar"
    [(visible)]="displayGastosDialog"
    [modal]="true"
    [responsive]="true"
    [style]="{ width: '400px' }"
    [closable]="false"
>
    <div class="p-fluid">
        <div class="p-field">
            <label for="tipoGasto">Tipo de Gasto</label>
            <p-dropdown
                appendTo="body"
                [options]="gastosHogarOptions"
                [(ngModel)]="gastoActual.tipo"
                placeholder="Seleccione el tipo de gasto"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
        </div>
        <div class="p-field">
            <label for="porcentajeGasto">Porcentaje (%)</label>
            <input
                type="number"
                pInputText
                [min]="0"
                [max]="100"
                [(ngModel)]="gastoActual.porcentaje"
                placeholder="Ingrese el porcentaje"
            />
        </div>
    </div>
    <p-footer>
        <button
            pButton
            label="Guardar"
            icon="pi pi-check"
            (click)="saveGastoHogar()"
            [disabled]="!isFormValid()"
        ></button>
        <button
            pButton
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-secondary"
            (click)="cancelGastoHogar()"
        ></button>
    </p-footer>
</p-dialog>

<!-- Diálogo para agregar o editar Gastos del Hogar -->
<p-dialog
    header="Composición Familiar"
    [(visible)]="displayFamiliarDialog"
    [modal]="true"
    [responsive]="true"
    [style]="{ width: '400px' }"
    [closable]="false"
>
    <div
        class="p-fluid"
        style="
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            align-content: center;
        "
    >
        <div>
            <label for="familiParentesco">Parentesco</label>
            <input
                type="text"
                pInputText
                [(ngModel)]="familiarActual.familiParentesco"
                placeholder="Ingrese el parentesco"
            />
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiaNombre">Nombre</label>
            <input
                type="text"
                pInputText
                [(ngModel)]="familiarActual.familiaNombre"
                placeholder="Ingrese el nombre"
            />
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiaApellido">Apellido</label>
            <input
                type="text"
                pInputText
                [(ngModel)]="familiarActual.familiaApellido"
                placeholder="Ingrese el apellido"
            />
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familigenero">Genero</label>
            <p-dropdown
                appendTo="body"
                [options]="familigeneroOptions"
                [(ngModel)]="familiarActual.familigenero"
                placeholder="Seleccione el genero"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiEdad">Edad</label>
            <input
                type="number"
                pInputText
                [(ngModel)]="familiarActual.familiEdad"
                placeholder="Ingrese la edad"
                min="0"
                max="100"
                step="1"
                style="width: 100%"
                class="p-inputtext-sm p-d-block"
            />
            <span
                style="
                    width: 100%;
                    display: block;
                    text-align: center;
                    font-size: 12px;
                "
                >Edad entre 0 y 100</span
            >
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiEstadoCivil">Estado Civil</label>
            <p-dropdown
                appendTo="body"
                [options]="estadoCivilOptions"
                [(ngModel)]="familiarActual.familiEstadoCivil"
                placeholder="Seleccione el estado civil"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiEtnia">Etnia</label>
            <p-dropdown
                appendTo="body"
                [options]="etniaOptions"
                [(ngModel)]="familiarActual.familiEtnia"
                placeholder="Seleccione la etnia"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiNacionalidad">Nacionalidad</label>

            <p-dropdown
                [options]="nacionalidadOptions"
                [(ngModel)]="familiarActual.familiNacionalidad"
                optionLabel="name"
                [showClear]="true"
                placeholder="Select a Country"
            >
                <ng-template pTemplate="selectedItem">
                    <div
                        class="flex align-items-center gap-2"
                        *ngIf="familiarActual.familiNacionalidad"
                    >
                        <img
                            src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                            [class]="
                                'flag flag-' +
                                familiarActual.familiNacionalidad.code.toLowerCase()
                            "
                            style="width: 18px"
                        />
                        <div>{{ familiarActual.familiNacionalidad.label }}</div>
                    </div>
                </ng-template>
                <ng-template let-country pTemplate="item">
                    <div class="flex align-items-center gap-2">
                        <img
                            src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                            [class]="'flag flag-' + country.code.toLowerCase()"
                            style="width: 18px"
                        />
                        <div>{{ country.label }}</div>
                    </div>
                </ng-template>
            </p-dropdown>
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiCeduala">Cedula</label>
            <input
                type="text"
                pInputText
                [(ngModel)]="familiarActual.familiCeduala"
                placeholder="Ingrese la cedula"
                maxlength="10"
                minlength="10"
            />
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiNivelEducativo">Nivel Educativo</label>
            <p-dropdown
                appendTo="body"
                [options]="nivelEducativoOptions"
                [(ngModel)]="familiarActual.familiNivelEducativo"
                placeholder="Seleccione el nivel educativo"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
            <span
                style="
                    width: 100%;
                    display: block;
                    text-align: center;
                    font-size: 12px;
                "
                >Selecciona entre los niveles educativos</span
            >
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiOcupacion">Ocupación</label>
            <p-dropdown
                appendTo="body"
                [options]="ocupacionOptions"
                [(ngModel)]="familiarActual.familiOcupacion"
                placeholder="Seleccione la ocupación"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiDiscacidad">Discapacidad</label>
            <p-dropdown
                appendTo="body"
                [options]="discapacidadOptions"
                [(ngModel)]="familiarActual.familiDiscacidad"
                placeholder="Seleccione la discapacidad"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
        </div>
        <div
            class="p-field"
            style="
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                align-content: center;
            "
        >
            <label for="familiEnfermedad">Enfermedad</label>
            <p-dropdown
                appendTo="body"
                [options]="enfermedadOptions"
                [(ngModel)]="familiarActual.familiEnfermedad"
                placeholder="Seleccione la enfermedad"
                optionLabel="label"
                [ngModelOptions]="{ standalone: true }"
            ></p-dropdown>
            <span
                style="
                    width: 100%;
                    display: block;
                    text-align: center;
                    font-size: 12px;
                "
                >Enfermedad entre 0 y 10</span
            >
        </div>
    </div>
    <p-footer>
        <button
            pButton
            label="Guardar"
            icon="pi pi-check"
            (click)="saveFamiliar()"
            [disabled]="!isFormValidFamili()"
        ></button>
        <button
            pButton
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-secondary"
            (click)="cancelFamiliar()"
        ></button>
    </p-footer>
</p-dialog>
