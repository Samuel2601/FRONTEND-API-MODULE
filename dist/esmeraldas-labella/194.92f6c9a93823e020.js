"use strict";(self.webpackChunkesmeraldas_labella=self.webpackChunkesmeraldas_labella||[]).push([[194],{7194:(bt,y,t)=>{t.r(y),t.d(y,{SignupModule:()=>jt});var x=t(177),v=t(3990),T=t(4523),h=t(7691),$=t(3710),P=t(8941),a=t(9417),e=t(4438),U=t(2415),E=t(5779),X=t(25),Y=t(516),g=t(2100),F=t(9170),j=t(1208),S=t(1141),b=t(9998),C=t(6781),R=t(935),I=t(2242),L=t(1631),M=t(3057),G=t(7515);const A=()=>({width:"50vw"});function N(o,u){if(1&o&&(e.j41(0,"div")(1,"p-tag",38)(2,"div",39),e.nrm(3,"i",40),e.j41(4,"span",41),e.EFF(5),e.k0s()()()()),2&o){const r=e.XpG();e.R7$(5),e.JRh(r.getErrorMessage("cedula"))}}function D(o,u){if(1&o&&(e.j41(0,"div")(1,"p-tag",38)(2,"div",39),e.nrm(3,"i",40),e.j41(4,"span",41),e.EFF(5),e.k0s()()()()),2&o){const r=e.XpG();e.R7$(5),e.JRh(r.getErrorMessage("nombres"))}}function V(o,u){if(1&o&&(e.j41(0,"div")(1,"p-tag",38)(2,"div",39),e.nrm(3,"i",40),e.j41(4,"span",41),e.EFF(5),e.k0s()()()()),2&o){const r=e.XpG();e.R7$(5),e.JRh(r.getErrorMessage("telefono"))}}function z(o,u){if(1&o&&(e.j41(0,"div")(1,"p-tag",38)(2,"div",39),e.nrm(3,"i",40),e.j41(4,"span",41),e.EFF(5),e.k0s()()()()),2&o){const r=e.XpG();e.R7$(5),e.JRh(r.getErrorMessage("correo"))}}function B(o,u){if(1&o&&(e.j41(0,"div")(1,"p-tag",38)(2,"div",39),e.nrm(3,"i",40),e.j41(4,"span",41),e.EFF(5),e.k0s()()()()),2&o){const r=e.XpG();e.R7$(5),e.JRh(r.getErrorMessage("password"))}}let J=(()=>{class o{constructor(r,n,i,s,l,p,f,c){this.router=r,this.formBuilder=n,this.admin=i,this.messageService=s,this.helper=l,this.create=p,this.dialogService=f,this.ref=c,this.validationMessages={cedula:[{type:"required",message:"La c\xe9dula es requerida."},{type:"minlength",message:"La c\xe9dula debe tener 10 caracteres."},{type:"maxlength",message:"La c\xe9dula debe tener 10 caracteres."},{type:"pattern",message:"La c\xe9dula debe contener solo n\xfameros."}],nombres:[{type:"required",message:"El nombre es requerido."},{type:"pattern",message:"El nombre debe contener solo letras."}],telefono:[{type:"required",message:"El tel\xe9fono es requerido."},{type:"minlength",message:"El tel\xe9fono debe tener 10 caracteres."},{type:"maxlength",message:"El tel\xe9fono debe tener 10 caracteres."},{type:"pattern",message:"El tel\xe9fono debe contener solo n\xfameros."}],correo:[{type:"invalido",message:"Correo electronico ya registrado"},{type:"required",message:"El correo electr\xf3nico es requerido."},{type:"email",message:"Ingrese un correo electr\xf3nico v\xe1lido."}],password:[{type:"required",message:"La contrase\xf1a es requerida."},{type:"minlength",message:"La contrase\xf1a debe tener al menos 4 caracteres."}]},this.checked=null,this.visible=!1,this.load_imagen=!0,this.formulario={},this.active=0,this.formulario=this.formBuilder.group({cedula:["",[a.k0.minLength(10),a.k0.maxLength(10),a.k0.pattern("^[0-9]+$")]],nombres:["",[a.k0.required,a.k0.pattern("^[a-zA-Z ]+$")]],telefono:["",[a.k0.required,a.k0.minLength(10),a.k0.maxLength(10),a.k0.pattern("^[0-9]+$")]],correo:["",[a.k0.required,this.customEmailValidator()]],password:["",[a.k0.required,a.k0.minLength(4)]],checked:[!1]}),this.formulario.get("cedula")?.valueChanges.subscribe(m=>{this.formulario.get("cedula")?.valid&&this.consultar(m)}),this.formulario.get("correo").valueChanges.subscribe(m=>{const St=m.replace(/\s/g,"").toLowerCase();this.formulario.patchValue({correo:St},{emitEvent:!1})}),this.formulario.get("correo")?.valueChanges.subscribe(m=>{this.formulario.get("correo")?.valid&&this.consultarcorreo(m)})}customEmailValidator(){return r=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r.value)?null:{invalidEmail:!0}}getErrorMessage(r){const n=this.formulario.get(r);if(!n||!n.errors)return"";const i=[];for(const s in n.errors)if(n.errors.hasOwnProperty(s)){const l=this.validationMessages[r].find(p=>p.type===s);l&&i.push(l.message)}return i.join("\n")}ver(){}consultar(r){this.visible=!0,this.admin.getCiudadano(r).subscribe(n=>{setTimeout(()=>{this.visible=!1,n.nombres&&(this.formulario.get("nombres")?.setValue(n.nombres),this.formulario.get("nombres")?.disable())},1e3)},n=>{this.visible=!1,this.formulario.get("nombres")?.setValue(""),this.formulario.get("nombres")?.enable(),this.messageService.add({severity:"error",summary:("("+n.status+")").toString(),detail:n.error.message+": "+this.formulario.get("cedula")?.value||"Sin conexi\xf3n"}),this.formulario.get("cedula")?.setValue("")})}llamarmodal(){this.ref=this.dialogService.open($.W,{header:"Politicas y Privacidad de Esmeraldas la Bella",dismissableMask:!0,width:this.isMobil()?"100%":"70%"}),P.q.addListener("backButton",r=>{this.ref.close()})}consultarcorreo(r){this.visible=!0,this.admin.verificarCorreo(r).subscribe(n=>{n&&(this.messageService.add({severity:"error",summary:"Invalido",detail:"Correo electronico ya existente"}),this.formulario.get("correo")?.setErrors({invalido:!0,type:"duplicidad"})),setTimeout(()=>{this.visible=!1},1e3)})}registrarse(){this.visible=!0,this.formulario.valid?(this.formulario.get("nombres")?.enable(),this.create.registrarUsuario(this.formulario.value).subscribe(r=>{this.messageService.add({severity:"success",summary:"Excelente",detail:"Registrado Correctamente"}),setTimeout(()=>{this.router.navigate(["/auth/login"],{queryParams:{correo:this.formulario.get("correo").value,password:this.formulario.get("password").value}})},1e3)},r=>{this.messageService.add({severity:"error",summary:("("+r.status+")").toString(),detail:r.error.message||"Sin conexi\xf3n"})}),setTimeout(()=>{this.visible=!1},1e3)):this.messageService.add({severity:"error",summary:"Invalido",detail:"Rellene todos los campos"})}isMobil(){return this.helper.isMobil()}onFilesSelected(r){if(r.files.length>0){const i=URL.createObjectURL(r.files[0]);this.imagenesSeleccionadas=i,this.load_imagen=!1,this.messageService.add({severity:"info",summary:"File Uploaded",detail:"Imagen subida"})}}tomarFotoYEnviar(r){var n=this;return(0,T.A)(function*(){const i=yield h.i7.getPhoto({quality:90,allowEditing:!1,resultType:h.LK.Base64,source:h.ru.Prompt,promptLabelPhoto:"Seleccionar de la galer\xeda",promptLabelPicture:"Tomar foto"});if(i&&i.base64String){const s=atob(i.base64String),l=new Array(s.length);for(let d=0;d<s.length;d++)l[d]=s.charCodeAt(d);const p=new Uint8Array(l),f=new Blob([p],{type:"image/jpeg"});let c=new File([f],"prueba",{type:"image/jpeg"});n.selectedFiles=c;const m=new FileReader;m.onload=d=>{n.imagenesSeleccionadas=d.target.result},m.readAsDataURL(c)}else n.messageService.add({severity:"warning",summary:"MAX img",detail:"Solo puede enviar 3 imangenes"})})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(v.Ix),e.rXU(a.ok),e.rXU(U.z),e.rXU(E.bg),e.rXU(X.w),e.rXU(Y.m),e.rXU(g.o3),e.rXU(g.Pw))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-signup"]],decls:78,vars:15,consts:[[1,"px-4","py-8","md:px-6","lg:px-8",2,"background","url('assets/signin.jpg') no-repeat","background-size","cover"],[1,"flex","flex-wrap"],[1,"w-full","lg:w-6","p-4","lg:p-7","surface-card"],[3,"ngSubmit","formGroup"],[1,"flex","flex-column","gap-2","mx-auto",2,"min-height","20rem","max-width","30rem"],[1,"text-center","mt-3","mb-3","text-xl","font-semibold"],[1,"field","p-fluid"],[1,"pi","pi-user"],["formControlName","nombres","pInputText","","id","nombres","type","text","placeholder","Nombres","required",""],[1,"pi","pi-phone"],["formControlName","telefono","pInputText","","id","telefono","type","text","placeholder","Tel\xe9fono","required",""],[1,"pi","pi-envelope"],["formControlName","correo","pInputText","","id","correo","type","email","placeholder","Correo","required",""],["styleClass","w-full md:w-30rem mb-5","inputStyleClass","w-full p-3 md:w-30rem","formControlName","password","placeholder","Password","required","",3,"toggleMask"],[1,"flex","pt-4","justify-content-between"],["formControlName","checked",3,"onChange"],["for",""],["icon","pi pi-external-link","label","ver","type","button",3,"click","text","raised"],["label","Enviar","icon","pi pi-check","iconPos","right","type","submit",3,"disabled"],[1,"mt-6","text-center","text-600"],[4,"ngIf"],["tabindex","0",1,"font-medium","text-blue-500",3,"routerLink"],[1,"w-full","lg:w-6","p-4","lg:p-7",2,"background-color","rgba(255, 255, 255, 0.7)"],["src","assets/icon/logo.png","alt","Image","height","50",1,"mb-6"],[1,"text-xl","text-900","font-500","mb-3"],[1,"text-600","line-height-3","mt-0","mb-6"],[1,"list-none","p-0","m-0"],[1,"flex","align-items-start","mb-4"],[1,"flex","align-items-center","justify-content-center","bg-purple-400",2,"width","38px","height","38px","border-radius","10px"],[1,"text-xl","text-white","pi","pi-inbox"],[1,"ml-3"],[1,"font-medium","text-900"],[1,"mt-2","mb-0","text-600","line-height-3"],[1,"text-xl","text-white","pi","pi-shield"],[1,"flex","align-items-start"],[1,"text-xl","text-white","pi","pi-globe"],["header","Cargada de datos",3,"visibleChange","visible"],["ariaLabel","loading"],["severity","danger"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-times","text-xs"],[1,"text-base"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.nrm(1,"p-toast"),e.j41(2,"div",1)(3,"div",2)(4,"form",3),e.bIt("ngSubmit",function(){return i.registrarse()}),e.j41(5,"div",4)(6,"div",5),e.EFF(7," Informaci\xf3n de contacto "),e.k0s(),e.j41(8,"div",6)(9,"p-iconField")(10,"p-inputIcon"),e.nrm(11,"i",7),e.k0s(),e.nrm(12,"input",8),e.k0s()(),e.j41(13,"div",6)(14,"p-iconField")(15,"p-inputIcon"),e.nrm(16,"i",9),e.k0s(),e.nrm(17,"input",10),e.k0s()(),e.j41(18,"div",6)(19,"p-iconField")(20,"p-inputIcon"),e.nrm(21,"i",11),e.k0s(),e.nrm(22,"input",12),e.k0s()(),e.j41(23,"div",6),e.nrm(24,"p-password",13),e.k0s(),e.j41(25,"div",14)(26,"p-inputSwitch",15),e.bIt("onChange",function(){return i.ver()}),e.k0s(),e.j41(27,"label",16),e.EFF(28," Estas de acuerdo con nuestras politicas de seguridad? "),e.k0s(),e.j41(29,"p-button",17),e.bIt("click",function(){return i.llamarmodal()}),e.k0s()(),e.j41(30,"div",14),e.nrm(31,"p-button",18),e.k0s()()(),e.j41(32,"div",19),e.DNE(33,N,6,1,"div",20)(34,D,6,1,"div",20)(35,V,6,1,"div",20)(36,z,6,1,"div",20)(37,B,6,1,"div",20),e.k0s(),e.j41(38,"div",19),e.EFF(39," Ya tienes una cuenta? "),e.j41(40,"a",21),e.EFF(41,"Incia sesi\xf3n"),e.k0s()()(),e.j41(42,"div",22),e.nrm(43,"img",23),e.j41(44,"div",24),e.EFF(45," Bienvido Esmeraldas "),e.k0s(),e.j41(46,"p",25),e.EFF(47," Su privacidad es importante para nosotros. Los datos que nos proporcione son estrictamente confidenciales y no ser\xe1n compartidos con terceros. Solo recopilamos informaci\xf3n esencial para establecer contacto y brindarle el mejor servicio posible. "),e.k0s(),e.j41(48,"ul",26)(49,"li",27)(50,"div")(51,"span",28),e.nrm(52,"i",29),e.k0s()(),e.j41(53,"div",30)(54,"span",31),e.EFF(55,"Denuncias e Incidentes"),e.k0s(),e.j41(56,"p",32),e.EFF(57," Esta funci\xf3n est\xe1 dise\xf1ada para recopilar informaci\xf3n sobre cualquier inconveniente dentro del poblado, permiti\xe9ndonos brindar una r\xe1pida respuesta a la ciudadan\xeda. "),e.k0s()()(),e.j41(58,"li",27)(59,"div")(60,"span",28),e.nrm(61,"i",33),e.k0s()(),e.j41(62,"div",30)(63,"span",31),e.EFF(64,"Seguridad"),e.k0s(),e.j41(65,"p",32),e.EFF(66," Nos comprometemos a asegurar sus datos y a no divulgarlos bajo ninguna circunstancia. "),e.k0s()()(),e.j41(67,"li",34)(68,"div")(69,"span",28),e.nrm(70,"i",35),e.k0s()(),e.j41(71,"div",30)(72,"span",31),e.EFF(73,"Disponibilidad garantizada"),e.k0s(),e.j41(74,"p",32),e.EFF(75," Nuestro sitio web est\xe1 dise\xf1ado para garantizar su disponibilidad las 24 horas del d\xeda, los 7 d\xedas de la semana, para que pueda acceder a \xe9l en cualquier momento que lo necesite. "),e.k0s()()()()()()(),e.j41(76,"p-dialog",36),e.mxI("visibleChange",function(l){return e.DH7(i.visible,l)||(i.visible=l),l}),e.nrm(77,"p-progressSpinner",37),e.k0s()),2&n&&(e.R7$(4),e.Y8G("formGroup",i.formulario),e.R7$(20),e.Y8G("toggleMask",!0),e.R7$(5),e.Y8G("text",!0)("raised",!0),e.R7$(2),e.Y8G("disabled",!i.formulario.get("checked").value),e.R7$(2),e.Y8G("ngIf",i.formulario.get("cedula").invalid&&(i.formulario.get("cedula").dirty||i.formulario.get("cedula").touched)),e.R7$(),e.Y8G("ngIf",i.formulario.get("nombres").invalid&&(i.formulario.get("nombres").dirty||i.formulario.get("nombres").touched)),e.R7$(),e.Y8G("ngIf",i.formulario.get("telefono").invalid&&(i.formulario.get("telefono").dirty||i.formulario.get("telefono").touched)),e.R7$(),e.Y8G("ngIf",i.formulario.get("correo").invalid&&(i.formulario.get("correo").dirty||i.formulario.get("correo").touched)),e.R7$(),e.Y8G("ngIf",i.formulario.get("password").invalid&&(i.formulario.get("password").dirty||i.formulario.get("password").touched)),e.R7$(3),e.Y8G("routerLink","/auth/login"),e.R7$(36),e.Aen(e.lJ4(14,A)),e.R50("visible",i.visible))},dependencies:[x.bT,v.Wk,a.qT,a.me,a.BC,a.cb,a.YS,a.j4,a.JD,F.C,j.m,S.$n,b.y8,C.l,R.v,I.S,L.HW,M._2,G.p],styles:[".p-inputtext[_ngcontent-%COMP%], .p-password[_ngcontent-%COMP%]{height:50px;font-size:1.1rem!important}"]})}return o})(),O=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#i=this.\u0275inj=e.G2t({imports:[v.iI.forChild([{path:"",component:J}]),v.iI]})}return o})();var Z=t(2637),W=t(8537),H=t(9114),K=t(9667),Q=t(6150),k=t(7362),w=t(612),q=t(6743),_=t(3897),ee=t(8157),te=t(5430),ie=t(4827),re=t(9322),ne=t(4799),oe=t(7835),ae=t(9240),se=t(2711),le=t(6701),me=t(7964),de=t(7164),ge=t(6760),pe=t(1720),ve=t(8833),ue=t(1142),ce=t(8713),he=t(320),fe=t(8746),ye=t(9573),xe=t(4635),Ee=t(7480),Fe=t(1305),je=t(4602),Se=t(6160),be=t(6394),Ce=t(405),Re=t(6756),Ie=t(2618),Le=t(5144),Me=t(4111),Ge=t(5114),Te=t(2609),$e=t(6296),Pe=t(7899),Ue=t(1812),Xe=t(7983),Ye=t(3854),Ae=t(5473),Ne=t(5336),De=t(6574),Ve=t(1579),ze=t(494),Be=t(4714),Je=t(9071),Oe=t(8760),Ze=t(3227),We=t(5901),He=t(5875),Ke=t(5716),Qe=t(6528),ke=t(9266),we=t(7952),qe=t(8108),_e=t(8159),et=t(572),tt=t(5770),it=t(4359),rt=t(9880),nt=t(4945),ot=t(453),at=t(1683),st=t(908),lt=t(3973),mt=t(1830),dt=t(8542),gt=t(672),pt=t(7697),vt=t(185),ut=t(2011),ct=t(7678),ht=t(491),ft=t(6938),yt=t(563),xt=t(5756),Et=t(4468),Ft=t(1593);let jt=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#i=this.\u0275inj=e.G2t({providers:[E.bg,g.o3,g.Pw],imports:[x.MD,O,a.YN,a.X1,He.n,Se.I,je.k,F.A,j.y,we.a,b.MB,a.YN,a.X1,W.$$,rt.bG,C.P,R.$,fe.wn,be.U,he.e,w.rO,ve.kr,I.u,Ke.k,ut.dL,Et.eh,Z.h6,H.m,K.t,Q.EJ,k._,S.tm,q.R,_.tQ,ee.F,te.q4,ie.P,re.AV,ne.F,oe.H,ae.YG,se.rc,le.KQ,me.y,de.m,ge.C,pe.ad,g.k_,ue.sv,ce.P,ye.HV,xe.Zn,L.H_,Ee.O3,Fe.f,Ce.jJ,Re.UW,Ie.Qp,Le.Mk,Me.N9,Ge.u,Te.h,$e.iV,Pe.N,Ue.ux,Xe.d,Ye.I,Ae.b,Ne.M6,M.Ou,De.W,Ve.d,ze.Ko,Be.wZ,Je.h,Oe.M,Ze.F,We.xs,Qe.dG,ke.SW,qe.OT,_e.J,et.i,tt.U,it.Z,nt.fd,ot.bx,at.ht,st.i,lt.d0,mt.m,dt.S,gt.AG,pt.ft,vt.VG,ct.y,ht.D,ft.S,G.d,yt.Z,xt.y,Ft.f]})}return o})()}}]);