"use strict";(self.webpackChunkesmeraldas_labella=self.webpackChunkesmeraldas_labella||[]).push([[388],{4388:(nt,C,l)=>{l.r(C),l.d(C,{RecolectoresMunicipalesModule:()=>it});var g=l(6708),P=l(1761),m=l(7076),t=l(9573),f=l(2353),p=l(4516),I=l(7156),T=l(259),v=l(6509);const M=(0,v.F3)("Preferences",{web:()=>l.e(843).then(l.bind(l,8843)).then(o=>new o.PreferencesWeb)});var y=l(8625);const h=(0,v.F3)("Geolocation",{web:()=>l.e(102).then(l.bind(l,7102)).then(o=>new o.GeolocationWeb)}),R=(0,v.F3)("BackgroundGeolocation");let k=(()=>{class o{constructor(e){this._http=e,this.ubicaciones=new y.t([]),this.velocidadActual=new y.t(0),this.DistanciaRecorrida=new y.t(0),this.lastUpdateTimestamp=null,this.MAX_DISTANCE_KM=.001,this.MIN_SPEED_KMH=120,this.url=I.M.url,this.loadInitialLocations()}iniciarWatcher(){var e=this;R.addWatcher({backgroundMessage:"Cancela para prevenir drenar tu bater\xeda",backgroundTitle:"Aviso de rastreo",requestPermissions:!0,stale:!0,distanceFilter:40},function(){var n=(0,p.A)(function*(a,s){if(s)return"NOT_AUTHORIZED"===s.code&&window.confirm("Esta aplicaci\xf3n necesita tu ubicaci\xf3n, pero no tiene permiso.\n\n\xbfAbrir configuraci\xf3n ahora?")&&R.openSettings(),console.error(s);e.velocidadActual.next(a.speed||0);const r=Date.now(),u=yield h.getCurrentPosition(),b={lat:u.coords.latitude,lng:u.coords.longitude,timestamp:(new Date).toISOString(),speed:a.speed?3.6*a.speed:0,destacado:!1},E=e.isValidLocation(b,r);E&&(yield e.saveLocation(b,E),e.ubicaciones.next([...e.ubicaciones.getValue(),b]),e.lastUpdateTimestamp=r)});return function(a,s){return n.apply(this,arguments)}}()).then(n=>{console.log("Watcher ID:",n)}).catch(n=>{console.error("Error al iniciar el watcher",n)})}isValidLocation(e,i){i=i||Date.now();const n=this.ubicaciones.getValue().slice(-1)[0];if(!n)return!0;const a=this.calculateDistance(n,e);return this.DistanciaRecorrida.next(this.DistanciaRecorrida.value+a),console.log("La distancia al \xfaltimo punto: ",a),a>0&&a<=this.MIN_SPEED_KMH*((i-this.lastUpdateTimestamp)/1e3/3600)&&a<=1e3*this.MAX_DISTANCE_KM}calculateDistance(e,i){const a=e.lat*Math.PI/180,s=i.lat*Math.PI/180,c=(i.lat-e.lat)*Math.PI/180,r=(i.lng-e.lng)*Math.PI/180,u=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a)*Math.cos(s)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))*6371e3}loadInitialLocations(){var e=this;return(0,p.A)(function*(){try{const i=yield M.get({key:"locations"});console.log("Se ah encontrado: ",i);const n=i.value?JSON.parse(i.value):[];e.ubicaciones.next(n)}catch(i){console.error("Error loading locations:",i)}})()}saveLocation(e,i){var n=this;return(0,p.A)(function*(){if(i=i||n.isValidLocation(e)){const a=yield M.get({key:"locations"}),s=a.value?JSON.parse(a.value):[];s.push(e),yield M.set({key:"locations",value:JSON.stringify(s)}),n.ubicaciones.next([...n.ubicaciones.getValue(),e])}})()}getUbicaciones(){return this.ubicaciones.asObservable()}getVelocidadActual(){return this.velocidadActual.asObservable()}getDistanciaRecorrida(){return this.DistanciaRecorrida.asObservable()}obtenerDeviceGPS(){let e=(new T.Lr).set("Content-Type","application/json").set("Authorization","Basic "+btoa("CIUDADANIA:123456789"));return this._http.get("https://inteligenciavehicular.com/api/devices",{headers:e})}static#t=this.\u0275fac=function(i){return new(i||o)(t.KVO(T.Qq))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var j=l(3290),D=l(4951),F=l(7403),L=l(3943);let N=(()=>{class o{constructor(e,i,n,a,s){this.fb=e,this.messageService=i,this.ubicar=n,this.list=a,this.auth=s,this.funcionarios=[],this.devices=[],this.token=this.auth.token(),this.formulario=this.fb.group({funcionario:[null,m.k0.required],deviceId:[null,m.k0.required]})}ngOnInit(){this.fetchFuncionarios(),this.fetchDevices()}fetchFuncionarios(){this.list.listarUsuarios(this.token,{role:"65c505bc9c664a1238b47f1a"}).subscribe(e=>{console.log(e),e.data&&(this.funcionarios=e.data.map(i=>({...i,fullName:`${i.name} ${i.last_name}`})))})}fetchDevices(){this.ubicar.obtenerDeviceGPS().subscribe(e=>{console.log(e),this.devices=e})}checkExistingRegistrations(){const e=new Date,i=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`;this.list.listarAsignacionRecolectores(this.token,{dateOnly:i},!1).subscribe(n=>{console.log(n);const a=n.data||[];a.length>0&&a.forEach(s=>{this.funcionarios=this.funcionarios.filter(c=>c._id!==s.funcionario),this.devices=this.devices.filter(c=>c.id!==s.deviceId)})})}onSubmit(){this.formulario.valid||this.messageService.add({severity:"warn",summary:"Formulario Inv\xe1lido",detail:"Por favor, completa todos los campos."})}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(m.ok),t.rXU(f.bg),t.rXU(k),t.rXU(j.a),t.rXU(D.u))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-agregar-recolector"]],decls:16,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"p-field","p-5"],["for","funcionario"],["id","funcionario","formControlName","funcionario","optionLabel","fullName","placeholder","Seleccione un funcionario",3,"options"],["for","deviceId"],["id","deviceId","formControlName","deviceId","optionLabel","name","placeholder","Seleccione un dispositivo",3,"options"],[1,"p-field"],["pButton","","type","submit","label","Registrar"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"h3"),t.EFF(3," Asignaci\xf3n de Recolectores "),t.k0s()(),t.j41(4,"div",2)(5,"form",3),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(6,"div",4)(7,"label",5),t.EFF(8,"Funcionario"),t.k0s(),t.nrm(9,"p-dropdown",6),t.k0s(),t.j41(10,"div",4)(11,"label",7),t.EFF(12,"Recolectores"),t.k0s(),t.nrm(13,"p-dropdown",8),t.k0s(),t.j41(14,"div",9),t.nrm(15,"button",10),t.k0s()()()()),2&i&&(t.R7$(5),t.Y8G("formGroup",n.formulario),t.R7$(4),t.Y8G("options",n.funcionarios),t.R7$(4),t.Y8G("options",n.devices))},dependencies:[m.qT,m.BC,m.cb,m.j4,m.JD,F._f,L.ms]})}return o})();var w=l(4530),S=l(9033),A=l(719),$=l(8629),x=l(7793);const G=()=>({padding:"20px"}),U=()=>({"min-width":"auto"}),O=o=>({"highlight-row":o});function B(o,d){if(1&o&&(t.j41(0,"div")(1,"p"),t.EFF(2),t.k0s()()),2&o){const e=t.XpG();t.R7$(2),t.SpI(" Tiempo restante para habilitar el bot\xf3n: ",e.formatTime(e.returnTimeLeft)," ")}}function W(o,d){1&o&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"N\xb0"),t.k0s(),t.j41(3,"th"),t.EFF(4,"Latitud"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Longitud"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Fecha"),t.k0s()())}function Y(o,d){if(1&o){const e=t.RV6();t.j41(0,"tr",14),t.bIt("click",function(){const n=t.eBV(e).rowIndex,a=t.XpG();return t.Njj(a.getMarker(n))}),t.j41(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.nI1(9,"date"),t.k0s()()}if(2&o){const e=d.$implicit,i=d.rowIndex;t.Y8G("ngClass",t.eq3(8,O,e.retorno)),t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh(e.lat),t.R7$(2),t.JRh(e.lng),t.R7$(2),t.JRh(t.i5U(9,5,e.timestamp,"short"))}}let V=(()=>{class o{constructor(e,i,n){this.ubicacionService=e,this.googlemaps=i,this.helper=n,this.isReturnButtonDisabled=!1,this.returnDelay=9e5,this.velocidad=0,this.distancia=0,this.datos=[{lat:.9657655,lng:-79.6550148,timestamp:"7/30/24, 1:02 PM"},{lat:.9656814,lng:-79.6551387,timestamp:"7/30/24, 1:03 PM"},{lat:.9658164,lng:-79.6547029,timestamp:"7/30/24, 1:04 PM"},{lat:.9662421,lng:-79.6544553,timestamp:"7/30/24, 1:08 PM"},{lat:.9667238,lng:-79.6545723,timestamp:"7/30/24, 1:08 PM"},{lat:.9671889,lng:-79.6546772,timestamp:"7/30/24, 1:08 PM"},{lat:.9676337,lng:-79.6548404,timestamp:"7/30/24, 1:09 PM"},{lat:.968116,lng:-79.6549069,timestamp:"7/30/24, 1:09 PM"},{lat:.9685813,lng:-79.6550088,timestamp:"7/30/24, 1:09 PM"},{lat:.9690244,lng:-79.6551084,timestamp:"7/30/24, 1:09 PM"},{lat:.9695065,lng:-79.6552827,timestamp:"7/30/24, 1:09 PM"},{lat:.9699516,lng:-79.6553655,timestamp:"7/30/24, 1:10 PM"},{lat:.9701353,lng:-79.6549497,timestamp:"7/30/24, 1:10 PM"},{lat:.9702491,lng:-79.6545127,timestamp:"7/30/24, 1:10 PM"},{lat:.970369,lng:-79.6540486,timestamp:"7/30/24, 1:11 PM"},{lat:.9704433,lng:-79.6535755,timestamp:"7/30/24, 1:11 PM"},{lat:.9705558,lng:-79.6531107,timestamp:"7/30/24, 1:12 PM"},{lat:.9710168,lng:-79.6530569,timestamp:"7/30/24, 1:12 PM"},{lat:.9714914,lng:-79.6531824,timestamp:"7/30/24, 1:13 PM"},{lat:.9719769,lng:-79.6532784,timestamp:"7/30/24, 1:13 PM"},{lat:.9724389,lng:-79.6533848,timestamp:"7/30/24, 1:13 PM"},{lat:.9729243,lng:-79.6535011,timestamp:"7/30/24, 1:13 PM"},{lat:.9733678,lng:-79.6536393,timestamp:"7/30/24, 1:13 PM"},{lat:.9738032,lng:-79.6537938,timestamp:"7/30/24, 1:14 PM"},{lat:.9742861,lng:-79.6539687,timestamp:"7/30/24, 1:14 PM"},{lat:.9747995,lng:-79.6541088,timestamp:"7/30/24, 1:14 PM"},{lat:.975276,lng:-79.6541938,timestamp:"7/30/24, 1:14 PM"},{lat:.9757744,lng:-79.6542966,timestamp:"7/30/24, 1:14 PM"},{lat:.9762746,lng:-79.6544358,timestamp:"7/30/24, 1:14 PM"},{lat:.976744,lng:-79.6545407,timestamp:"7/30/24, 1:14 PM"},{lat:.976968,lng:-79.6549409,timestamp:"7/30/24, 1:15 PM"},{lat:.9769976,lng:-79.6553911,timestamp:"7/30/24, 1:16 PM"},{lat:.9766302,lng:-79.655677,timestamp:"7/30/24, 1:17 PM"},{lat:.9770762,lng:-79.6555332,timestamp:"7/30/24, 1:19 PM"},{lat:.9770968,lng:-79.6550571,timestamp:"7/30/24, 1:19 PM"},{lat:.9768853,lng:-79.6544926,timestamp:"7/30/24, 1:20 PM"},{lat:.9769662,lng:-79.6553117,timestamp:"7/30/24, 1:20 PM"},{lat:.9764872,lng:-79.6555229,timestamp:"7/30/24, 1:20 PM"},{lat:.9769044,lng:-79.6556998,timestamp:"7/30/24, 1:20 PM"},{lat:.9770357,lng:-79.655264,timestamp:"7/30/24, 1:32 PM"},{lat:.9774043,lng:-79.6555747,timestamp:"7/30/24, 1:33 PM"},{lat:.9769443,lng:-79.6553905,timestamp:"7/30/24, 1:46 PM"},{lat:.9764942,lng:-79.6553199,timestamp:"7/30/24, 1:50 PM"},{lat:.976054,lng:-79.6554236,timestamp:"7/30/24, 1:51 PM"},{lat:.9758303,lng:-79.6558173,timestamp:"7/30/24, 1:52 PM"},{lat:.975865,lng:-79.6553301,timestamp:"7/30/24, 1:53 PM"},{lat:.9755674,lng:-79.6549895,timestamp:"7/30/24, 1:54 PM"},{lat:.9750194,lng:-79.654835,timestamp:"7/30/24, 1:54 PM"},{lat:.9745433,lng:-79.6546496,timestamp:"7/30/24, 1:54 PM"},{lat:.9740408,lng:-79.6545743,timestamp:"7/30/24, 1:54 PM"},{lat:.9735554,lng:-79.6545037,timestamp:"7/30/24, 1:55 PM"},{lat:.9731167,lng:-79.6543455,timestamp:"7/30/24, 1:55 PM"},{lat:.9726613,lng:-79.6542209,timestamp:"7/30/24, 1:55 PM"},{lat:.9721611,lng:-79.6541068,timestamp:"7/30/24, 1:55 PM"},{lat:.971677,lng:-79.6539579,timestamp:"7/30/24, 1:55 PM"},{lat:.9712046,lng:-79.653855,timestamp:"7/30/24, 1:55 PM"},{lat:.9707102,lng:-79.6537388,timestamp:"7/30/24, 1:55 PM"},{lat:.9702403,lng:-79.6536607,timestamp:"7/30/24, 1:55 PM"},{lat:.969767,lng:-79.6536031,timestamp:"7/30/24, 1:55 PM"},{lat:.9692762,lng:-79.6535112,timestamp:"7/30/24, 1:56 PM"},{lat:.9688127,lng:-79.6534455,timestamp:"7/30/24, 1:56 PM"},{lat:.9683185,lng:-79.6533216,timestamp:"7/30/24, 1:56 PM"},{lat:.9678255,lng:-79.6532761,timestamp:"7/30/24, 1:56 PM"},{lat:.9673441,lng:-79.6531672,timestamp:"7/30/24, 1:56 PM"},{lat:.9668359,lng:-79.6530719,timestamp:"7/30/24, 1:56 PM"},{lat:.9663465,lng:-79.6530072,timestamp:"7/30/24, 1:56 PM"},{lat:.965862,lng:-79.6528747,timestamp:"7/30/24, 1:56 PM"}],this.table=[],this.polyline=new google.maps.Polyline,this.pathson=[],this.markers=[],this.infoWindows=[],this.displayDialog=!1}ngOnInit(){var e=this;return(0,p.A)(function*(){yield e.initMap(),e.locationSubscription=e.ubicacionService.getUbicaciones().subscribe(i=>{e.table=i,e.table.forEach(a=>{e.addMarker(a,!1)});const n=e.table.filter(a=>!0===a.retorno);if(n.length>0){n.sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime());const a=new Date(n[0].timestamp).getTime();e.checkReturnButtonStatus(a)}})})()}checkReturnButtonStatus(e){var i=this;return(0,p.A)(function*(){if(e){const n=new Date(e).getTime(),a=(new Date).getTime(),s=a-n;console.log("tiempo desde el ultimo retorno: ",a,n,i.formatTime(s),i.formatTime(i.returnDelay)),s<i.returnDelay?(i.isReturnButtonDisabled=!0,i.returnTimeLeft=i.returnDelay-s,i.startReturnTimer()):i.isReturnButtonDisabled=!1}})()}startReturnTimer(){this.returnInterval=setInterval(()=>{this.returnTimeLeft>0?this.returnTimeLeft-=1e3:(clearInterval(this.returnInterval),this.isReturnButtonDisabled=!1)},1e3)}ngOnDestroy(){this.locationSubscription&&this.locationSubscription.unsubscribe()}initMap(){var e=this;return(0,p.A)(function*(){const i=yield e.getLocation();e.googlemaps.getLoader().then((0,p.A)(function*(){e.mapCustom=new google.maps.Map(document.getElementById("map2"),{zoom:15,center:i,mapTypeId:"terrain",fullscreenControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_BOTTOM},draggable:!0,scrollwheel:!1,disableDoubleClickZoom:!0,gestureHandling:"cooperative"})}))})()}isMobil(){return this.helper.isMobil()}getLocation(){var e=this;return(0,p.A)(function*(){if(e.isMobil()){if(yield h.requestPermissions()){const n=yield h.getCurrentPosition();return{lat:n.coords.latitude,lng:n.coords.longitude}}return{lat:.977035,lng:-79.655415}}return{lat:.977035,lng:-79.655415}})()}addMarker(e,i){const n=new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:this.mapCustom,title:`Marcado, Time: ${(new Date).toISOString()}`}),a=new google.maps.InfoWindow({headerContent:e.retorno?"Retorno a Estaci\xf3n":"Punto de recolecci\xf3n",content:`<div style="margin: 5px;"><strong> Lat:</strong> ${e.lat}, <strong> Lng:</strong> ${e.lng}<br><strong>Fecha:</strong> ${(new Date).getDay()}/${(new Date).getMonth()}/${(new Date).getFullYear()}   ${(new Date).getHours()}:${(new Date).getMinutes()}</div>`});n.addListener("click",()=>{this.closeAllInfoWindows(),a.open(this.mapCustom,n)}),this.markers.push(n),this.infoWindows.push(a),i&&this.mapCustom.setCenter({lat:e.lat,lng:e.lng})}updateMap(e){var i=this;return(0,p.A)(function*(){const n=["#2196f3","#f57c00","#3f51b5","#009688","#f57c00","#9c27b0","#ff4032","#4caf50"];i.pathson.length>0&&i.pathson.forEach(r=>{r.setMap(null)}),i.pathson=[];const a=[];e.forEach(r=>{a.push({lat:r.lat,lng:r.lng})});const s=new google.maps.Polyline({path:a,geodesic:!0,strokeColor:n[a.length%n.length],strokeOpacity:1,strokeWeight:6});s.addListener("click",r=>{const u=new google.maps.InfoWindow({content:"Tu recorrido"});u.setPosition(r.latLng),u.open(i.mapCustom)}),s.setMap(i.mapCustom),i.pathson.push(s);const c=e[0];if(i.inicial)i.inicial.setPosition({lat:c.lat,lng:c.lng});else{i.inicial=new google.maps.Marker({position:{lat:c.lat,lng:c.lng},map:i.mapCustom,title:`Lat: ${c.lat}, Lng: ${c.lng}, Time: ${c.timestamp}`});const r=new google.maps.InfoWindow({content:`<div><strong>Inicio</strong><br>Lat: ${c.lat}, Lng: ${c.lng}<br>Time: ${c.timestamp}</div>`});i.inicial.addListener("click",()=>{r.open(i.mapCustom,i.inicial)})}if(e.length>3){const r=e[e.length-1];if(i.final)i.final.setPosition({lat:r.lat,lng:r.lng});else{i.final=new google.maps.Marker({position:{lat:r.lat,lng:r.lng},map:i.mapCustom,title:`Lat: ${r.lat}, Lng: ${r.lng}, Time: ${r.timestamp}`});const u=new google.maps.InfoWindow({content:`<div><strong>Fin</strong><br>Lat: ${r.lat}, Lng: ${r.lng}<br>Time: ${r.timestamp}</div>`});i.final.addListener("click",()=>{u.open(i.mapCustom,i.final)})}}i.table=e})()}clearMap(){this.polyline&&(this.polyline.setMap(null),this.polyline=null)}addManualLocation(e,i){var n=this;return(0,p.A)(function*(){const a=yield h.getCurrentPosition();if(a){const s={lat:a.coords.latitude,lng:a.coords.longitude,timestamp:(new Date).toISOString(),speed:0,destacado:e,retorno:i};(n.ubicacionService.isValidLocation(s)||i)&&(e&&n.addMarker(s,!1),yield n.ubicacionService.saveLocation(s,!0),i&&(n.displayDialog=!1,n.returnTimeLeft=n.returnDelay,n.isReturnButtonDisabled=!0,n.startReturnTimer()))}else alert("No se pudo obtener la ubicaci\xf3n actual")})()}confirmReturnToStation(){this.displayDialog=!0}closeAllInfoWindows(){this.infoWindows.forEach(e=>e.close())}getMarker(e){this.closeAllInfoWindows();const i=this.markers[e],n=this.infoWindows[e];i&&n&&(this.mapCustom.setCenter(i.getPosition()),n.open(this.mapCustom,i))}formatTime(e){const i=e/1e3;return`${Math.floor(i/60)}m ${Math.floor(i%60)}s`}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(k),t.rXU(w.s),t.rXU(S.w))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-agregar-ubicacion-recolectores"]],decls:17,vars:14,consts:[[1,"map-container","mb-5"],["id","map2",1,"card",2,"min-height","20vh","margin-left","-18px","margin-right","-18px"],[1,"velocidad-container"],["icon","pi pi-plus","label","Agregar Ubicaci\xf3n Manual",3,"onClick"],[1,"velocidad-container","m-5"],["label","Retorno a la Estaci\xf3n",3,"click","disabled"],[4,"ngIf"],["scrollHeight","300px",3,"value","scrollable","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Confirmaci\xf3n",3,"visibleChange","visible","modal","closable","draggable"],["icon","pi pi-info-circle","severity","info",3,"value"],["label","S\xed",3,"click"],["label","No",3,"click"],[3,"click","ngClass"]],template:function(i,n){1&i&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.j41(2,"div",2)(3,"p-button",3),t.bIt("onClick",function(){return n.addManualLocation(!0,!1)}),t.k0s()(),t.j41(4,"div",4)(5,"p-button",5),t.bIt("click",function(){return n.confirmReturnToStation()}),t.k0s(),t.DNE(6,B,3,1,"div",6),t.k0s()(),t.j41(7,"p-table",7),t.DNE(8,W,9,0,"ng-template",8)(9,Y,10,10,"ng-template",9),t.k0s(),t.j41(10,"p-dialog",10),t.mxI("visibleChange",function(s){return t.DH7(n.displayDialog,s)||(n.displayDialog=s),s}),t.j41(11,"p"),t.EFF(12,"\xbfNesecitas retornar a est\xe1ci\xf3n?"),t.k0s(),t.nrm(13,"p-tag",11),t.j41(14,"p-footer")(15,"p-button",12),t.bIt("click",function(){return n.addManualLocation(!0,!0)}),t.k0s(),t.j41(16,"p-button",13),t.bIt("click",function(){return n.displayDialog=!1}),t.k0s()()()),2&i&&(t.R7$(3),t.Aen(t.lJ4(12,G)),t.R7$(2),t.Y8G("disabled",n.isReturnButtonDisabled),t.R7$(),t.Y8G("ngIf",n.isReturnButtonDisabled),t.R7$(),t.Y8G("value",n.table)("scrollable",!0)("tableStyle",t.lJ4(13,U)),t.R7$(3),t.R50("visible",n.displayDialog),t.Y8G("modal",!0)("closable",!1)("draggable",!1),t.R7$(3),t.Y8G("value","Tiempo de espera despu\xe9s de usar Retorno a estaci\xf3n: "+n.formatTime(n.returnDelay)))},dependencies:[g.YU,g.bT,f.wi,f.Ei,F.$n,A.l,$.XI,x.v,g.vh],styles:[".velocidad-container[_ngcontent-%COMP%]{text-align:center}.velocidad-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.2em;color:#333}.velocidad-value[_ngcontent-%COMP%]{font-size:2em;color:#1e90ff}.highlight-row[_ngcontent-%COMP%]{background-color:var(--yellow-400);color:var(--text-color);font-weight:700}"]})}return o})();var X=l(2226),J=l(7228),H=l(1846),z=l(9552),K=l(9901),Z=l(4471);function Q(o,d){1&o&&t.nrm(0,"img",49)}function q(o,d){if(1&o&&(t.qex(0),t.nrm(1,"p-radioButton",50),t.j41(2,"label",51),t.EFF(3),t.k0s(),t.bVm()),2&o){const e=d.$implicit;t.R7$(),t.Y8G("inputId",e.name)("value",e.name),t.R7$(),t.Y8G("for",e.name),t.R7$(),t.JRh(e.name)}}let _=(()=>{class o{constructor(e){this.fb=e,this.houseStates=[{name:"Casa Cerrada"},{name:"Solar Vac\xedo"},{name:"Construcci\xf3n Iniciada"},{name:"Hogar Entrevistado"},{name:"Casa no Habitada"},{name:"Solar con maleza"}],this.surveyForm=this.fb.group({date:["",m.k0.required],possessionTime:[""],phone:[""],nationality:[""],surveyorName:["",m.k0.required],intervieweeName:["",m.k0.required],age:["",m.k0.required],ethnicity:[""],civilStatus:[""],educationLevel:[""],idNumber:[""],disability:[""],address:["",m.k0.required],sector:[""],neighborhood:[""],blockNumber:[""],lotNumber:[""],familyCount:[0,m.k0.required],peopleCount:[0,m.k0.required],houseState:new m.MJ})}onSubmit(){this.surveyForm.valid&&console.log(this.surveyForm.value)}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(m.ok))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-formulario-socioeconomico"]],decls:92,vars:7,consts:[["header","Formulario Socio Econ\xf3mico","subheader","Rellena la siguiente informaci\xf3n: "],["pTemplate","header"],[1,"p-fluid",3,"formGroup"],[1,"p-grid"],[1,"p-md-col-12","p-4"],["id","date","formControlName","date","styleClass","full-width",3,"showIcon"],["for","date"],["id","possessionTime","formControlName","possessionTime","pInputText","","type","text",1,"full-width"],["for","possessionTime"],["id","phone","formControlName","phone","pInputText","","type","text",1,"full-width"],["for","phone"],["id","nationality","formControlName","nationality","pInputText","","type","text",1,"full-width"],["for","nationality"],["id","surveyorName","formControlName","surveyorName","pInputText","","type","text",1,"full-width"],["for","surveyorName"],["id","intervieweeName","formControlName","intervieweeName","pInputText","","type","text",1,"full-width"],["for","intervieweeName"],["id","age","formControlName","age",1,"full-width",3,"useGrouping"],["for","age"],["id","ethnicity","formControlName","ethnicity","pInputText","","type","text",1,"full-width"],["for","ethnicity"],["id","civilStatus","formControlName","civilStatus","pInputText","","type","text",1,"full-width"],["for","civilStatus"],["id","educationLevel","formControlName","educationLevel","pInputText","","type","text",1,"full-width"],["for","educationLevel"],["id","idNumber","formControlName","idNumber","pInputText","","type","text",1,"full-width"],["for","idNumber"],["id","disability","formControlName","disability","pInputText","","type","text",1,"full-width"],["for","disability"],["id","address","formControlName","address","pInputText","","type","text",1,"full-width"],["for","address"],["id","sector","formControlName","sector","pInputText","","type","text",1,"full-width"],["for","sector"],["id","neighborhood","formControlName","neighborhood","pInputText","","type","text",1,"full-width"],["for","neighborhood"],["id","blockNumber","formControlName","blockNumber","pInputText","","type","text",1,"full-width"],["for","blockNumber"],["id","lotNumber","formControlName","lotNumber","pInputText","","type","text",1,"full-width"],["for","lotNumber"],["id","familyCount","formControlName","familyCount",1,"full-width",3,"useGrouping"],["for","familyCount"],["id","peopleCount","formControlName","peopleCount",1,"full-width",3,"useGrouping"],["for","peopleCount"],[1,"p-field"],[1,"field-checkbox"],[4,"ngFor","ngForOf"],[1,"p-d-flex","p-ai-center","p-jc-between","p-mt-2"],["label","Cancelar","severity","secondary",1,"p-mr-2"],["label","Enviar",3,"disabled"],["alt","Card","src","https://primefaces.org/cdn/primeng/images/card-ng.jpg"],["formControlName","houseState",3,"inputId","value"],[1,"ml-2",3,"for"]],template:function(i,n){1&i&&(t.j41(0,"p-card",0),t.DNE(1,Q,1,0,"ng-template",1),t.j41(2,"form",2)(3,"div",3)(4,"div",4)(5,"p-floatLabel"),t.nrm(6,"p-calendar",5),t.j41(7,"label",6),t.EFF(8,"Fecha:"),t.k0s()(),t.j41(9,"p-floatLabel"),t.nrm(10,"input",7),t.j41(11,"label",8),t.EFF(12,"Tiempo de posesi\xf3n:"),t.k0s()(),t.j41(13,"p-floatLabel"),t.nrm(14,"input",9),t.j41(15,"label",10),t.EFF(16,"Tel\xe9fono:"),t.k0s()(),t.j41(17,"p-floatLabel"),t.nrm(18,"input",11),t.j41(19,"label",12),t.EFF(20,"Nacionalidad:"),t.k0s()(),t.j41(21,"p-floatLabel"),t.nrm(22,"input",13),t.j41(23,"label",14),t.EFF(24,"Nombre del Encuestador:"),t.k0s()(),t.j41(25,"p-floatLabel"),t.nrm(26,"input",15),t.j41(27,"label",16),t.EFF(28,"Nombre del(a) Entrevistado(a):"),t.k0s()()(),t.j41(29,"div",4)(30,"p-floatLabel"),t.nrm(31,"p-inputNumber",17),t.j41(32,"label",18),t.EFF(33,"Edad:"),t.k0s()(),t.j41(34,"p-floatLabel"),t.nrm(35,"input",19),t.j41(36,"label",20),t.EFF(37,"Etnia:"),t.k0s()(),t.j41(38,"p-floatLabel"),t.nrm(39,"input",21),t.j41(40,"label",22),t.EFF(41,"Estado Civil:"),t.k0s()(),t.j41(42,"p-floatLabel"),t.nrm(43,"input",23),t.j41(44,"label",24),t.EFF(45,"Niv. Educ:"),t.k0s()(),t.j41(46,"p-floatLabel"),t.nrm(47,"input",25),t.j41(48,"label",26),t.EFF(49,"N\xba C\xe9dula:"),t.k0s()(),t.j41(50,"p-floatLabel"),t.nrm(51,"input",27),t.j41(52,"label",28),t.EFF(53,"Discapacidad/En:"),t.k0s()()(),t.j41(54,"div",4)(55,"p-floatLabel"),t.nrm(56,"input",29),t.j41(57,"label",30),t.EFF(58,"Direcci\xf3n:"),t.k0s()(),t.j41(59,"p-floatLabel"),t.nrm(60,"input",31),t.j41(61,"label",32),t.EFF(62,"Sector:"),t.k0s()(),t.j41(63,"p-floatLabel"),t.nrm(64,"input",33),t.j41(65,"label",34),t.EFF(66,"Barrio:"),t.k0s()(),t.j41(67,"p-floatLabel"),t.nrm(68,"input",35),t.j41(69,"label",36),t.EFF(70,"Manzana:"),t.k0s()(),t.j41(71,"p-floatLabel"),t.nrm(72,"input",37),t.j41(73,"label",38),t.EFF(74,"N\xfamero de lote:"),t.k0s()(),t.j41(75,"p-floatLabel"),t.nrm(76,"p-inputNumber",39),t.j41(77,"label",40),t.EFF(78,"\xbfCu\xe1ntas familias viven en el hogar?"),t.k0s()(),t.j41(79,"p-floatLabel"),t.nrm(80,"p-inputNumber",41),t.j41(81,"label",42),t.EFF(82,"\xbfCu\xe1ntas personas viven en el hogar?"),t.k0s()(),t.j41(83,"div",43)(84,"label"),t.EFF(85,"ESTADO DE LA CASA:"),t.k0s(),t.j41(86,"div",44),t.DNE(87,q,4,4,"ng-container",45),t.k0s()()()(),t.j41(88,"p-footer")(89,"div",46),t.nrm(90,"p-button",47)(91,"p-button",48),t.k0s()()()()),2&i&&(t.R7$(2),t.Y8G("formGroup",n.surveyForm),t.R7$(4),t.Y8G("showIcon",!0),t.R7$(25),t.Y8G("useGrouping",!1),t.R7$(45),t.Y8G("useGrouping",!1),t.R7$(4),t.Y8G("useGrouping",!1),t.R7$(7),t.Y8G("ngForOf",n.houseStates),t.R7$(4),t.Y8G("disabled",!n.surveyForm.valid))},dependencies:[g.Sq,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,f.wi,f.Ei,F.$n,X.Vv,J.S,H.YI,z.a,K.Z,Z.V],styles:[".p-field[_ngcontent-%COMP%]{padding:5px}p-floatLabel[_ngcontent-%COMP%]{margin:15px}"]})}return o})(),tt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#i=this.\u0275inj=t.G2t({imports:[P.iI.forChild([{path:"map",component:V},{path:"register",component:N},{path:"formulario",component:_}]),P.iI]})}return o})();var et=l(6967);let it=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#i=this.\u0275inj=t.G2t({imports:[tt,g.MD,et.L]})}return o})()}}]);